!function(a){"use strict";a.widget("custom.slotMachine",{options:{numSlotsToShow:3},_create:function(){if(this.options.numSlotsToShow%2===0)throw"slotMachine: numSlotsToShow must be an odd number";if(this.numRows=this.element.find(".slot-bars").children().length,this.numColumns=this.element.find(".slot-bar:nth-child(1) .slot-box").length,0===this.numRows||0===this.numColumns)throw"slotMachine: missing slots";this._adjustStyles(),this._appendShaders(),this._appendExtraSlots()},_adjustStyles:function(){this.element.find(".slot-bar").css("width",100/this.numColumns+"%"),this.element.find(".slot-box").css("height",100/this.options.numSlotsToShow+"%")},_appendShaders:function(){var b=this.element.find(".slot-bars"),c=a('<div class="slot-top-shader"></div>'),d=a('<div class="slot-bottom-shader"></div>'),e=Math.floor(this.options.numSlotsToShow/2),f=100/this.options.numSlotsToShow*e;c.css("height",f+"%"),d.css("height",f+"%"),b.prepend(c),b.append(d)},_appendExtraSlots:function(){this.element.find(".slot-bar").each(function(){a(this).append(a(this).children().clone()),a(this).css("bottom",0)})},spin:function(){var b=this.element.find(".slot-bar");b.each(function(){var b=a(this),c=function(d,e,f,g,h){b.animate({bottom:h||160},{easing:d||"linear",duration:f||200,complete:function(){e>g||(a(this).css("bottom",0),e===g?c("easeOutBounce",e+1,500,g,52):c(null,e+1,null,g))}})},d=Math.floor(20*Math.random()+3);c(null,0,null,d)})},destroy:function(){console.log("destroyed")}})}(jQuery);